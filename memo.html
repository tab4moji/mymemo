<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta charset="UTF-8">
  <!-- ã‚¹ãƒãƒ›å¯¾å¿œ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Memo!</title>
  <!-- 8bitæ„Ÿã‚’æ¼”å‡ºã™ã‚‹ãŸã‚ã®ãƒ•ã‚©ãƒ³ãƒˆ -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
  <!-- body ã¯ memo_login.js ã«ã‚ˆã‚Šå‹•çš„ã«æ§‹ç¯‰ -->
  <!-- <script src="memo_login.js"></script> -->
  <script language="javascript" type="text/javascript" charset="utf-8">
  function loadScriptDynamically(url, callback) {
      // æ–°ã—ã„ <script> è¦ç´ ã‚’ä½œæˆ
      var script = document.createElement('script');
      script.type = 'text/javascript';

      // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ãŸã‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’URLã«è¿½åŠ 
      // ã“ã‚Œã«ã‚ˆã‚Šã€æ¯å›æ–°ã—ã„URLã¨ã—ã¦èªè­˜ã•ã‚Œã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒä½¿ã‚ã‚Œã‚‹ã®ã‚’é˜²ãã¾ã™ã€‚
      var cacheBusterUrl = url + '?_t=' + new Date().getTime();
      try {
        script.src = cacheBusterUrl;
      } catch (err) {
        ShowError(err.message)
      }

      // ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ­ãƒ¼ãƒ‰ãŒæˆåŠŸã—ãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
      script.onload = function() {
          console.log('Script loaded successfully: ' + url);
          if (callback) {
              callback(); // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒã‚ã‚Œã°å®Ÿè¡Œ
          }
      };

      // ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ­ãƒ¼ãƒ‰ãŒå¤±æ•—ã—ãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
      script.onerror = function() {
        ShowError('Failed to load script: ' + url)
      };

      // ç”Ÿæˆã—ãŸ <script> è¦ç´ ã‚’HTMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¿½åŠ 
      // é€šå¸¸ã¯ <head> ã«è¿½åŠ ã—ã¾ã™ãŒã€çŠ¶æ³ã«ã‚ˆã£ã¦ã¯ <body> ã®æœ€å¾Œã«ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚
      document.head.appendChild(script);
      // ã¾ãŸã¯ document.body.appendChild(script);
  }

  function ShowError (error_message, title = "ERRor!") {
    // memory é–¢æ•°ãŒç„¡ã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºï¼ˆã‚¨ãƒ©ãƒ¼æç”»ã¯ memo.html ã®é ˜åŸŸã«ä»»ã›ã‚‹ï¼‰
    document.body.innerHTML = `
      <style>
        body {
          background-color: #111;
          color: #fff;
          font-family: 'Press Start 2P', cursive;
          display: flex;
          align-items: center;
          justify-content: center;
          height: 100vh;
          margin: 0;
        }
        .error-container {
          text-align: center;
          background-color: #222;
          padding: 30px;
          border: 4px solid #f00;
          border-radius: 10px;
          box-shadow: 0 0 20px #f00;
          animation: shake 0.5s;
        }
        @keyframes shake {
          0% { transform: translateX(0); }
          20% { transform: translateX(-10px); }
          40% { transform: translateX(10px); }
          60% { transform: translateX(-10px); }
          80% { transform: translateX(10px); }
          100% { transform: translateX(0); }
        }
      </style>
      <div class="error-container">
        <h1>ğŸ’¥ ` + title + ` ğŸ’£ï¸</h1>
        <p>` + error_message + `</p>
      </div>
    `;
  }

  loadScriptDynamically('memo_gate.js');
  try {
    // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã—ã§å˜ã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
    loadScriptDynamically('memo_login.js', function () {
      try {
        entry_mode();
      } catch (err) {
        ShowError(err.message)
      }
    });
  } catch (err) {
    ShowError(err.message)
  }
</script>
</body>
</html>
