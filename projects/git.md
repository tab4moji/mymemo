## git いろは

### リポジトリを移植

全履歴、全ブランチ、全タグをそのまま新しいリポジトリ（リモート）に移すなら、`--mirror` オプションを使うのが一番手っ取り早くて確実だ。

#### 手順（ベアブランチを経由する完全な移行）

これが一番きれいな「移植」になる。

1. **移行先**のリポジトリを空で作成しておく。
2. 以下のコマンドを実行する。

```bash
# 1. 旧リポジトリを mirror オプション付きでクローン（作業用の一時ディレクトリができる）
git clone --mirror <旧リポジトリのURL>

# 2. ディレクトリに移動（.git で終わるディレクトリができているはずだ）
cd <リポジトリ名>.git

# 3. 新リポジトリへ mirror オプション付きでプッシュ
git push --mirror <新リポジトリのURL>

```

これで完了だ。作業用のディレクトリ（`<リポジトリ名>.git`）は削除していい。

---

#### 補足：今手元にあるローカルリポジトリをそのまま投げたい場合

わざわざ `clone` し直さずに、今作業しているそのディレクトリの内容を新リポジトリに投げたいなら、リモートを追加して投げる。

```bash
# 1. 新しいリモート先を追加（名前は new_origin など適当に）
git remote add new_origin <新リポジトリのURL>

# 2. 全ブランチをプッシュ
git push new_origin --all

# 3. 全タグをプッシュ
git push new_origin --tags

```

ただ、この方法は「ローカルに存在するブランチ」しか飛ばないから、リモートにしかないブランチ（fetchしてないやつ）は移行漏れする可能性がある。完全移行なら最初の `--mirror` を推奨する。
何か詰まったり、特定の条件（LFSを使っているなど）があれば教えてくれ。
